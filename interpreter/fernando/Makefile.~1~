CXX += -std=c++0x
CPPFLAGS += $(extIncludesSACLIB) -I../formula 
CXXFLAGS += -Wall -Wno-unused-variable -Wno-parentheses -Wno-unused-label -O3
ARFLAGS := crvU

LIB = fernando.a
LIB_OBJS = \
 $(LIB)(fern-poly-iter.o deduction.o bbded.o minwtbasis.o BBSat.o mono-explain.o poly-explain.o deduce-sign.o wbsat.o wbsat-tester.o minhitset/naive/hitset.o solver/mhs-gen.o solver/boxer.o solver/bbwb.o solver/box-solver.o solver/box-solver-comm.o solver/qep-solver.o solver/qep-solver-comm.o sactester.o sample-comm.o type-comm.o ../minisat/core/lib.a)

$(LIB): $(LIB_OBJS)

fernando.a: fern-poly-iter.o deduction.o bbded.o minwtbasis.o BBSat.o mono-explain.o poly-explain.o deduce-sign.o wbsat.o wbsat-tester.o minhitset/naive/hitset.o solver/mhs-gen.o   ../minisat/core/lib.a solver/boxer.o solver/bbwb.o solver/box-solver.o solver/box-solver-comm.o solver/qep-solver.o solver/qep-solver-comm.o sactester.o sample-comm.o type-comm.o

#Files used in multiple directories

#base.a: fern-poly-iter.o deduction.o
#	ar $(ARFLAGS) base.a  fern-poly-iter.o deduction.o

fern-poly-iter.o: fern-poly-iter.cpp fern-poly-iter.h ../formula/formula.a ../poly/poly.a ../GC_System/GC_System.h ../formrepconventions.h

deduction.o: deduction.cpp deduction.h ../poly/poly.h ../poly/poly.cpp fern-poly-iter.o 



#blackbox.a: bbded.o BBSat.o minwtbasis.o

#	ar $(ARFLAGS) blackbox.a bbded.o BBSat.o minwtbasis.o

bbded.o: deduction.o  ../formula/formula.a ../poly/poly.a bbded.cpp bbded.h

minwtbasis.o: minwtbasis.cpp minwtbasis.h bbded.o deduction.o ../formula/formula.a

BBSat.o: BBSat.cpp BBSat.h bbded.o ../formula/formula.a 



#whitebox.a: mono-explain.o poly-explain.o deduce-sign.o wbsat.o
#	ar $(ARFLAGS) whitebox.a mono-explain.o poly-explain.o deduce-sign.o wbsat.o

mono-explain.o: mono-explain.h mono-explain.cpp fern-poly-iter.o

poly-explain.o: mono-explain.o poly-explain.cpp poly-explain.h  fern-poly-iter.o

deduce-sign.o: mono-explain.o poly-explain.o deduce-sign.h deduce-sign.cpp fern-poly-iter.o

wbsat.o: wbsat.cpp wbsat.h ../formula/formula.a ../formrepconventions.h deduce-sign.o poly-explain.o mono-explain.o  fern-poly-iter.o deduction.o

wbsat-tester.o: wbsat-tester.cpp wbsat-tester.h wbsat.o



#solver/solver.a: solver/bbwb.o solver/box-solver-comm.o solver/box-solver.o solver/boxer.o solver/qep-solver-comm.o solver/qep-solver.o
#	ar $(ARFLAGS) solver/solver.a solver/bbwb.o solver/box-solver-comm.o solver/box-solver.o solver/boxer.o solver/qep-solver-comm.o solver/qep-solver.o

solver/boxer.o: solver/boxer.cpp solver/boxer.h wbsat.o bbded.o 

bbwb.o: bbwb.cpp bbwb.h boxer.o

mhs-gen.o: mhs-gen.cpp mhs-gen.h minhitset/naive/hitset.o

minhitset/naive/hitset.o: minhitset/naive/hitset.cpp minhitset/naive/hitset.h

box-solver.o: box-solver.cpp box-solver.h ../poly/poly.a ../shell/qepcad-inter/qepcad-session.h ../minisat/core/lib.a ../formula/formula.a mhs-gen.o

box-solver-comm.o: box-solver-comm.h box-solver-comm.cpp box-solver.o ../minisat/core/lib.a

qep-solver.o: box-solver.o qep-solver.cpp qep-solver.h ../minisat/core/lib.a

qep-solver-comm.o: qep-solver.o

#box-solver.cpp box-solver.h ../poly/factor.cpp ../poly/factor.h ../shell/qepcad-inter/qepcad-session.h ../minisat/core/lib.a ../formula/formula.cpp ../formula/formula.h mhs-gen.o mhs-gen.cpp mhs-gen.h minhitset/naive/hitset.o

#utils.a: sactester.o sample-comm.o type-comm.o
#	ar $(ARFLAGS) utils.a sactester.o sample-comm.o type-comm.o

sactester.o:  sactester.h sactester.cpp ../formula/formula.a

sample-comm.o: sample-comm.cpp sample-comm.h

type-comm.o: type-comm.cpp type-comm.h




../minisat/core/lib.a:
	cd ../minisat/core; make libr

.PHONY: lib deb clean



lib:	$(LIB)

deb:	$(LIB)

clean:
	rm -f $(LIB)
	rm -f *.o



$(LIB):	$(LIB_OBJS)

